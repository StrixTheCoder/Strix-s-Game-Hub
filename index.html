<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>GameHub â€” 30+ Games</title>

  <!-- Tailwind (CDN quick-play) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* small custom tweaks */
    .thumb { background-size: cover; background-position: center; height: 160px; }
    .card { transition: transform .12s, box-shadow .12s; }
    .card:hover { transform: translateY(-6px); box-shadow: 0 12px 30px rgba(2,6,23,0.6); }
    /* overlay fade helpers */
    #overlay { transition: opacity .18s ease; }
  </style>
</head>
<body class="bg-slate-900 text-slate-100 antialiased">

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-gradient-to-b from-black/50 to-transparent border-b border-slate-800">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between gap-4">
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 rounded-lg flex items-center justify-center bg-gradient-to-br from-violet-600 to-cyan-400 text-black font-bold">GH</div>
        <div>
          <div class="font-semibold text-lg">GameHub</div>
          <div class="text-xs text-slate-400">30+ browser games â€” search, filter, play fullscreen</div>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <button id="randomTop" class="px-3 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-cyan-400 text-black font-semibold flex items-center gap-2">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 3h5v5M8 21H3v-5M21 3L3 21"/></svg>
          Random
        </button>
        <button id="chestTop" class="px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-200 flex items-center gap-2">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7h18v4H3zM5 11v8h14v-8"/></svg>
          Chest
        </button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <!-- Controls -->
    <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6">
      <div class="flex gap-2 items-center flex-wrap" id="categoriesContainer" aria-label="Categories"></div>

      <div class="flex gap-2 items-center w-full md:w-auto">
        <input id="search" type="search" placeholder="Search games or categories..." class="w-full md:w-72 px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 placeholder:text-slate-400 focus:outline-none" />
        <button id="randomBtn" class="px-3 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-cyan-400 text-black font-semibold">ðŸŽ² Random Game</button>
      </div>
    </div>

    <!-- Grid -->
    <div id="grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
  </main>

  <!-- Player Overlay -->
  <div id="overlay" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/80"></div>

    <div class="relative z-10 w-full h-full md:max-w-6xl md:h-[84vh] p-4">
      <div class="bg-slate-900 rounded-lg flex flex-col h-full border border-slate-800 overflow-hidden">
        <div class="flex items-center justify-between gap-4 p-3 border-b border-slate-800">
          <div>
            <div id="gameTitle" class="font-semibold text-lg">Game</div>
            <div id="gameHint" class="text-xs text-slate-400"></div>
          </div>
          <div class="flex items-center gap-2">
            <button id="fsBtn" class="px-2 py-1 rounded bg-slate-800 text-slate-200">Fullscreen</button>
            <button id="reloadBtn" class="px-2 py-1 rounded bg-slate-800 text-slate-200">Reload</button>
            <button id="openNewBtn" class="px-2 py-1 rounded bg-slate-800 text-slate-200">Open</button>
            <button id="closeBtn" class="px-2 py-1 rounded bg-red-600 text-black font-semibold">Close</button>
          </div>
        </div>

        <div id="playerArea" class="flex-1 relative bg-black">
          <iframe id="gameFrame" class="w-full h-full" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>

          <div id="errorOverlay" class="absolute inset-0 flex flex-col items-center justify-center bg-black/80 text-slate-300 p-6 hidden">
            <div class="text-xl font-semibold mb-2">Game unavailable</div>
            <div class="text-sm mb-4 text-slate-400 text-center">This game could not be embedded (it may block iframes). You can open it in a new tab instead.</div>
            <div class="flex gap-3">
              <button id="openNewBtn2" class="px-3 py-2 rounded bg-indigo-600">Open in new tab</button>
              <button id="closeErrBtn" class="px-3 py-2 rounded bg-slate-700">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="max-w-6xl mx-auto px-4 py-6 text-slate-500 text-sm">
    Tip: If an embedded game doesn't load, use "Open" to launch it in a new tab.
  </footer>

<script>
/* -------------------------------
   Game list (30+ entries)
   Keep this as light URLs (no images) â€” placeholder images are generated
--------------------------------*/
const games = [
  { id:'dino',    name: "Dino Game",        url: "https://wayou.github.io/t-rex-runner/",         category: "Arcade" },
  { id:'flappy',  name: "Flappy Bird",      url: "https://flappybird.io/",                        category: "Arcade" },
  { id:'trexAlt', name: "Chrome Dino (alt)",url: "https://chromedino.com/",                       category: "Arcade" },
  { id:'subway',  name: "Subway Surfers (clone)", url: "https://eeshadutta.github.io/Subway-Surfers/", category: "Arcade" },
  { id:'block',   name: "Block Blast",      url: "https://ubg77.github.io/game2048/",             category: "Puzzle" },
  { id:'pacman',  name: "Pac-Man",          url: "https://www.retrogames.cc/embed/24834-pac-man.html", category: "Classics" },
  { id:'tetris',  name: "Tetris",           url: "https://simonlc.github.io/tetr.js/",            category: "Puzzle" },
  { id:'snake',   name: "Snake",            url: "https://playsnake.org/",                        category: "Classics" },
  { id:'basket',  name: "Basketball Stars", url: "https://basketball-stars.io/",                 category: "Sports" },
  { id:'drift',   name: "Drift Boss",       url: "https://driftboss.io/",                        category: "Racing" },
  { id:'moto',    name: "Moto X3M",         url: "https://www.crazygames.com/game/moto-x3m",     category: "Racing" },
  { id:'2048',    name: "2048",             url: "https://play2048.co/",                         category: "Puzzle" },
  { id:'helix',   name: "Helix Jump",       url: "https://helixjump.io/",                        category: "Arcade" },
  { id:'run3',    name: "Run 3",            url: "https://run3.io/",                             category: "Arcade" },
  { id:'geometry',name: "Geometry Dash",    url: "https://geometrydashlite.io/",                 category: "Arcade" },
  { id:'cookie',  name: "Cookie Clicker",   url: "https://ozh.github.io/cookieclicker/",         category: "Casual" },
  { id:'1v1',     name: "1v1.lol",          url: "https://1v1.lol/",                             category: "Shooter" },
  { id:'slope',   name: "Slope",            url: "https://slopegame.io/",                       category: "Arcade" },
  { id:'stick',   name: "Stickman Hook",    url: "https://stickmanhook.io/",                     category: "Arcade" },
  { id:'zombs',   name: "Zombs Royale",     url: "https://zombsroyale.io/",                      category: "Shooter" },
  { id:'paper',   name: "Paper.io 2",       url: "https://paper-io.com/",                        category: "Arcade" },
  { id:'krunker', name: "Krunker",          url: "https://krunker.io/",                          category: "Shooter" },
  { id:'crossy',  name: "Crossy Road",      url: "https://crossyroad.com/play/",                 category: "Arcade" },
  { id:'agar',    name: "Agar.io",          url: "https://agar.io/",                             category: "Multiplayer" },
  { id:'holeio',  name: "Hole.io",          url: "https://hole-io.com/",                         category: "Arcade" },
  { id:'shell',   name: "Shell Shockers",   url: "https://shellshock.io/",                       category: "Shooter" },
  { id:'superhot',name: "Superhot",         url: "https://superhotgame.com/play/",               category: "Action" },
  { id:'bottle',  name: "Bottle Flip",      url: "https://play.famobi.com/wrapper/bottle-flip/A1000-10", category: "Casual" },
  { id:'pong',    name: "Pong",             url: "https://editor.p5js.org/anon/full/3GB0Vj2aT",  category: "Classics" },
  { id:'aster',   name: "Asteroids",        url: "https://codeincomplete.github.io/asteroids/",  category: "Classics" },
  { id:'break',   name: "Breakout",         url: "https://www.retrogames.cc/embed/4373-breakout.html", category: "Classics" },
  { id:'bubbles', name: "Bubble Shooter",   url: "https://editor.p5js.org/anon/full/0J3k",       category: "Puzzle" }
];

/* ---------- helper: placeholder images ---------- */
function placeholderFor(name, w=640, h=360){
  const text = encodeURIComponent(name);
  // tiny & dark placeholder with name
  return `https://via.placeholder.com/${w}x${h}.png?text=${text}&bg=111&fg=eee`;
}

/* ---------- render categories ---------- */
const catContainer = document.getElementById('categoriesContainer');
const categories = ["All", ...Array.from(new Set(games.map(g => g.category || 'Other')))];
categories.forEach((cat, i) => {
  const btn = document.createElement('button');
  btn.type = 'button';
  btn.className = 'px-3 py-1 rounded-lg text-sm bg-slate-800 border border-slate-700 hover:bg-slate-700';
  btn.textContent = cat;
  btn.dataset.cat = cat;
  btn.addEventListener('click', () => {
    // mark active
    document.querySelectorAll('#categoriesContainer button').forEach(b => b.classList.remove('ring','ring-2','ring-violet-500'));
    btn.classList.add('ring','ring-2','ring-violet-500');
    filterByCategory(cat);
  });
  catContainer.appendChild(btn);

  // mark All active initially
  if(i === 0) btn.classList.add('ring','ring-2','ring-violet-500');
});

/* ---------- render grid ---------- */
const grid = document.getElementById('grid');
function renderGames(list){
  grid.innerHTML = '';
  list.forEach(g => {
    const card = document.createElement('article');
    card.className = 'card bg-slate-800 rounded-lg overflow-hidden';

    const thumb = document.createElement('div');
    thumb.className = 'thumb';
    thumb.style.backgroundImage = `url('${placeholderFor(g.name)}')`;

    const meta = document.createElement('div');
    meta.className = 'p-3';
    meta.innerHTML = `<div class="font-semibold">${g.name}</div><div class="text-xs text-slate-400">${g.category || ''}</div>`;

    const actions = document.createElement('div');
    actions.className = 'p-3 pt-0';
    const playBtn = document.createElement('button');
    playBtn.className = 'w-full px-3 py-2 rounded-lg bg-gradient-to-r from-violet-600 to-cyan-400 text-black font-semibold';
    playBtn.textContent = 'Play Now';
    playBtn.addEventListener('click', (e) => { e.stopPropagation(); openGame(g); });

    actions.appendChild(playBtn);
    card.appendChild(thumb);
    card.appendChild(meta);
    card.appendChild(actions);

    // click the card to play too
    card.addEventListener('click', ()=> openGame(g));

    grid.appendChild(card);
  });
}
/* initial render */
renderGames(games);

/* ---------- search & filtering ---------- */
const searchInput = document.getElementById('search');
searchInput.addEventListener('input', () => {
  const q = searchInput.value.trim().toLowerCase();
  const filtered = games.filter(g => {
    return g.name.toLowerCase().includes(q) || (g.category && g.category.toLowerCase().includes(q));
  });
  renderGames(filtered);
});

function filterByCategory(cat){
  if(cat === 'All') renderGames(games);
  else renderGames(games.filter(g => g.category === cat));
}

/* ---------- overlay / iframe logic ---------- */
const overlay = document.getElementById('overlay');
const frame = document.getElementById('gameFrame');
const titleEl = document.getElementById('gameTitle');
const hintEl = document.getElementById('gameHint');
const errorOverlay = document.getElementById('errorOverlay');

let currentGame = null;
let loadTimeout = null;

function openGame(g){
  currentGame = g;
  titleEl.textContent = g.name;
  hintEl.textContent = (g.category ? 'Category: ' + g.category : '');
  errorOverlay.classList.add('hidden');
  frame.style.display = 'block';
  overlay.classList.remove('hidden');

  // ensure a quick reload even if same url
  frame.src = 'about:blank';
  setTimeout(() => frame.src = g.url, 40);

  // set open new tab buttons
  document.getElementById('openNewBtn').onclick = ()=> window.open(g.url, '_blank');
  document.getElementById('openNewBtn2').onclick = ()=> window.open(g.url, '_blank');

  // set basic load fallback: if onload doesn't trigger with content, show error after 3s
  clearTimeout(loadTimeout);
  loadTimeout = setTimeout(() => {
    // try to detect empty doc (same-origin only). If cross-origin, we can't reliable detect; assume OK
    try {
      const d = frame.contentDocument;
      if(d && d.body && d.body.innerHTML.trim().length < 20) {
        showEmbedError();
      }
    } catch(e){
      // cross-origin -> assume OK (many embeds are cross-origin but work)
    }
    // show no-op here; rely on onload event to cancel timeout when possible
  }, 3000);
}

frame.onload = function(){
  clearTimeout(loadTimeout);
  // small heuristic to detect embed returning very small content (if same-origin)
  try {
    const d = frame.contentDocument;
    if(d && d.body && d.body.innerHTML.trim().length < 20) {
      showEmbedError();
      return;
    }
  } catch(e){ /* ignore cross-origin */ }
  errorOverlay.classList.add('hidden');
};

function showEmbedError(){
  frame.style.display = 'none';
  errorOverlay.classList.remove('hidden');
}

/* overlay controls */
document.getElementById('closeBtn').addEventListener('click', closePlayer);
document.getElementById('closeErrBtn').addEventListener('click', closePlayer);
document.getElementById('reloadBtn').addEventListener('click', ()=> {
  if(!currentGame) return;
  errorOverlay.classList.add('hidden');
  frame.style.display = 'block';
  frame.src = currentGame.url;
});
document.getElementById('openNewBtn').addEventListener('click', ()=> {
  if(currentGame) window.open(currentGame.url,'_blank');
});
document.getElementById('openNewBtn2').addEventListener('click', ()=> {
  if(currentGame) window.open(currentGame.url,'_blank');
});

function closePlayer(){
  overlay.classList.add('hidden');
  frame.src = 'about:blank';
  frame.style.display = 'block';
  currentGame = null;
  errorOverlay.classList.add('hidden');
  clearTimeout(loadTimeout);
}

/* fullscreen */
document.getElementById('fsBtn').addEventListener('click', ()=> {
  const container = document.querySelector('#overlay > div') || document.documentElement;
  if(!document.fullscreenElement) container.requestFullscreen?.();
  else document.exitFullscreen?.();
});

/* keyboard: Esc to close overlay */
document.addEventListener('keydown', (e)=> {
  if(e.key === 'Escape') {
    if(!overlay.classList.contains('hidden')) closePlayer();
  }
});

/* random game */
function randomGame(){
  const idx = Math.floor(Math.random() * games.length);
  openGame(games[idx]);
}
document.getElementById('randomBtn').addEventListener('click', randomGame);
document.getElementById('randomTop').addEventListener('click', randomGame);

/* chest reward */
document.getElementById('chestTop').addEventListener('click', ()=> {
  const rewards = ["+50 coins","+100 XP","Lucky Badge","+1 Skin","+10 Gems","Try Premium"];
  const pick = rewards[Math.floor(Math.random()*rewards.length)];
  alert("Chest opened!\nReward: " + pick);
});

/* accessibility */
searchInput.setAttribute('aria-label','Search games');
</script>
</body>
</html>
